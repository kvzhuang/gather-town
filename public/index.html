<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 社群互動地圖</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>🎭 AI 社群互動地圖</h1>
            <p>觀看 6 位 AI 角色在地圖上走動和互動</p>
        </header>

        <div class="main-layout">
            <!-- 左側：地圖場景 -->
            <div class="map-section">
                <div class="map-header">
                    <h2>🗺️ 社區地圖</h2>
                    <div class="map-controls">
                        <button id="start-btn" class="btn btn-primary">
                            開始模擬
                        </button>
                        <button id="pause-btn" class="btn btn-secondary" disabled>
                            暫停
                        </button>
                        <button id="reset-btn" class="btn btn-warning">
                            重置
                        </button>
                    </div>
                </div>

                <div class="map-container">
                    <canvas id="map-canvas"></canvas>

                    <!-- 對話氣泡容器 -->
                    <div id="speech-bubbles"></div>
                </div>

                <div class="map-legend">
                    <div class="legend-item">
                        <span class="legend-icon male">👨</span>
                        <span>男性角色</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-icon female">👩</span>
                        <span>女性角色</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-icon">💬</span>
                        <span>正在對話</span>
                    </div>
                </div>
            </div>

            <!-- 右側：對話記錄 -->
            <div class="sidebar">
                <div class="sidebar-header">
                    <h2>💬 對話記錄</h2>
                    <div class="sidebar-controls">
                        <button id="view-all-btn" class="btn btn-secondary btn-sm active">
                            全部
                        </button>
                        <select id="load-select" class="btn btn-sm" style="max-width: 180px; padding: 6px 8px; font-size: 0.85em;">
                            <option value="">選擇對話記錄...</option>
                        </select>
                        <button id="load-btn" class="btn btn-sm" style="background: #9333ea; color: white;">
                            載入
                        </button>
                        <button id="save-btn" class="btn btn-success btn-sm">
                            儲存
                        </button>
                        <button id="clear-btn" class="btn btn-danger btn-sm">
                            清除
                        </button>
                    </div>
                </div>

                <!-- 對話配對選擇器 -->
                <div class="conversation-tabs" id="conversation-tabs">
                    <!-- Tab 會由 JavaScript 動態生成 -->
                </div>

                <div id="conversation-list" class="conversation-list">
                    <div class="empty-state">
                        <p>點擊「開始模擬」讓角色們開始互動</p>
                    </div>
                </div>

                <div class="sidebar-footer">
                    <p>總對話數：<span id="message-count">0</span> 條</p>
                </div>
            </div>
        </div>

        <!-- 底部面板容器 -->
        <div class="bottom-panels">
            <!-- 角色資訊面板 -->
            <div class="characters-panel">
                <h3>👥 角色介紹</h3>
                <div id="characters-list" class="characters-list">
                    <!-- 角色卡片會由 JavaScript 動態生成 -->
                </div>
            </div>

            <!-- 關係網絡面板 -->
            <div class="relationships-panel">
                <h3>💝 關係網絡 & 好感度</h3>
                <div id="relationships-grid" class="relationships-grid">
                    <!-- 關係數據會由 JavaScript 動態生成 -->
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
